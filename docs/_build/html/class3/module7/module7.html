<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Lab 7: SSL Visibility for DLP (ICAP)</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Lab 7: SSL Visibility for DLP (ICAP)"/>
  <meta name="product" content="F5 Identity and Access Management Solutions"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2020-05-19 03:36:25"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 Identity and Access Management Solutions" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Lab 7: SSL Visibility for DLP (ICAP) &#8212; F5 Identity and Access Management Solutions  documentation</title>
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5_agility_theme.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/f5.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/index.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/f5-theme.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/CoveoFullSearch.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/21fb8a09c3.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Conclusion" href="../conclusion.html" />
    <link rel="prev" title="Lab 6: Captive Portal Authentication" href="../module6/module6.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      <!-- javascript code to maintain the sidebar scroll positon when loaded -->
      <script type="text/javascript">
        $(function() {
          if (localStorage.tempScrollTop) {
            $('#sidebar').scrollTop(localStorage.tempScrollTop);
          }
        });
        $('#sidebar').on("scroll", function() {
          localStorage.setItem("tempScrollTop", $('#sidebar').scrollTop());
        });
      </script>
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 Identity and Access Management Solutions  </h5>
        
<div id="searchbox" role="search">
  <form class="search" action="../../search.html" method="get">
    <input type="text" class="search" name="q" placeholder=" Search..." />
    <button type="submit" class="btn btn-info navbar-btn"><i class="fa fa-search"></i></button>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../class1/class1.html">Class 1: SAML Federation with F5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class2/class2.html">Class 2: OAuth Federation with F5</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../class3.html">Class 3: SWG - Securing Outbound Internet Access</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../labinfo.html">Lab Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module1/module1.html">Lab 1: SWG iApp – Explicit Proxy for HTTP and HTTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module2/module2.html">Lab 2: URL Category-based Decryption Bypass</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module3/module3.html">Lab 3: Explicit Proxy Authentication – NTLM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module4/module4.html">Lab 4: SWG Reporting with BIG-IQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module5/module5.html">Lab 5: SWG iApp - Transparent Proxy for HTTP and HTTPS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module6/module6.html">Lab 6: Captive Portal Authentication</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Lab 7: SSL Visibility for DLP (ICAP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../conclusion.html">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../class4/class4.html">Class 4: SAML Identity Provider (IdP) Lab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class5/class5.html">Class 5: AD FS Proxy Lab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class6/class6.html">Class 6: Federating Common Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class7/class7.html">Class 7: Introduction to Universal Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class8/class8.html">Class 8: Troubleshooting Universal Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class9/class9.html">Class 9: Multi-Factor Auth for Cloud Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class10/class10.html">Class 10: Privileged User Access</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Lab 7: SSL Visibility for DLP (ICAP)</a><ul>
<li><a class="reference internal" href="#task-1-re-configure-swg-iapp-to-enable-icap-inspection">Task 1 – Re-configure SWG iApp to enable ICAP inspection</a></li>
<li><a class="reference internal" href="#task-2-testing">Task 2 – Testing</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../index.html">F5 Identity and Access Management Solutions</a>
              &gt; <a href="../class3.html">Class 3: SWG - Securing Outbound Internet Access</a>

          <span class="right">
             <a href="../../_sources/class3/module7/module7.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/osantiago774/f5-agility-labs-iam">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="lab-7-ssl-visibility-for-dlp-icap">
<h1>Lab 7: SSL Visibility for DLP (ICAP)<a class="headerlink" href="#lab-7-ssl-visibility-for-dlp-icap" title="Permalink to this headline">¶</a></h1>
<p>In this lab exercise, you will send decrypted traffic to an ICAP-based
Data Loss Prevention (DLP) service for inspection. The DLP will block
HTTP POSTs (uploads) of certain content such as credit cards numbers and
documents with Top Secret data classification labels.</p>
<p>Estimated completion time: 15 minutes</p>
<p><strong>Objectives:</strong></p>
<ul class="simple">
<li>Re-configure the SWG iApp to send unencrypted HTTP and decrypted
HTTPS traffic to an ICAP (DLP) server</li>
<li>Verify that the DLP service is able to see SWG proxy traffic and
block if a policy violation occurs</li>
</ul>
<p><strong>Lab Requirements:</strong></p>
<ul class="simple">
<li>Working SWG iApp deployment</li>
</ul>
<div class="section" id="task-1-re-configure-swg-iapp-to-enable-icap-inspection">
<h2>Task 1 – Re-configure SWG iApp to enable ICAP inspection<a class="headerlink" href="#task-1-re-configure-swg-iapp-to-enable-icap-inspection" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">Browse to <strong>iApps &gt;&gt; Application Services &gt; Applications</strong></p>
</li>
<li><p class="first">Click on <strong>SWG</strong></p>
</li>
<li><p class="first">Click <strong>Reconfigure</strong></p>
</li>
<li><p class="first">Scroll down to the <strong>ICAP Configuration</strong> section</p>
</li>
<li><p class="first">Change the ICAP option to <strong>Yes, create a new ICAP DLP
deployment</strong></p>
</li>
<li><p class="first">Enter <strong>10.1.20.150</strong> as the IP address of the DLP
server (the default port of <strong>1344</strong> is correct).</p>
<p><a class="reference internal" href="../../_images/image392.png"><img alt="image37" src="../../_images/image392.png" style="width: 6.04375in; height: 2.25347in;" /></a></p>
</li>
<li><p class="first">Browse to the bottom and click <strong>Finished</strong></p>
</li>
</ul>
</div>
<div class="section" id="task-2-testing">
<h2>Task 2 – Testing<a class="headerlink" href="#task-2-testing" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Open Internet Explorer on your Jump Host client machine</li>
<li>Browse to <strong>http://dlptest.com</strong></li>
<li>If you are prompted for authentication, login as <code class="docutils literal notranslate"><span class="pre">user1</span></code> with
password <code class="docutils literal notranslate"><span class="pre">AgilityRocks!</span></code></li>
<li>Click on the <strong>HTTP Post</strong> link at the top of the page.</li>
<li>Fill in the <strong>Subject</strong> and <strong>Message</strong> fields with some random text
and then add a credit card numbers such as <strong>4111 1111 1111
1111</strong>.</li>
<li>Click on the <strong>Submit</strong> button to see if the DLP service detects
this. <strong>*Hint:</strong> You should receive a blocking page message.*</li>
<li>Go back to the previous page try submitting again but with the words
<strong>top secret</strong>. Again, you should receive a blocking page from
the DLP service.</li>
<li>Now, go back to the previous page and click on the <strong>HTTPS Post</strong>
link at the top of the page.</li>
<li>Perform the credit card number and <strong>top secret</strong> submissions
again. You should again see the blocking pages since SWG is
decrypting the HTTPS connection and sending the decrypted POST data
to the DLP service for inspection.</li>
<li>If you want to see the DLP policy violations, browse to
<strong>https://10.1.20.150/logs</strong>. Log in as <code class="docutils literal notranslate"><span class="pre">mydlp</span></code> with password
<code class="docutils literal notranslate"><span class="pre">mydlp</span></code>.</li>
</ul>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="../module6/module6.html" title="Lab 6: Captive Portal Authentication" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="../conclusion.html" title="Conclusion" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/index.js"></script>
  <script src="../../_static/js/jquery.appear.js"></script>
  <script src="../../_static/js/printThis.js"></script>
  <script src="/assets/js/bootstrap.min.js"></script>
  <script src="/assets/js/clouddocs.js"></script>
  <script src="/assets/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>